# ğŸ‰ ClipWiz é¡¹ç›®äº¤ä»˜æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

ClipWiz æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è§†é¢‘ç¼–è¾‘å’Œåˆæˆå¹³å°ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„ pnpm monorepo æ¶æ„ã€‚é¡¹ç›®å·²å®ŒæˆåŸºç¡€æ¡†æ¶æ­å»ºï¼Œå¯ä»¥ç«‹å³å¼€å§‹å¼€å‘ã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. é¡¹ç›®ç»“æ„æ­å»º
- âœ… pnpm monorepo é…ç½®
- âœ… TypeScript å…¨æ ˆé…ç½®
- âœ… 3 ä¸ªå­é¡¹ç›®ï¼šwebã€serverã€shared
- âœ… 40+ æºæ–‡ä»¶å’Œé…ç½®æ–‡ä»¶

### 2. Web è§†é¢‘ç¼–è¾‘å™¨ (apps/web)
- âœ… React 18 + TypeScript + Vite é¡¹ç›®åˆå§‹åŒ–
- âœ… Ant Design UI æ¡†æ¶é›†æˆ
- âœ… åŸºç¡€ç•Œé¢å¸ƒå±€ï¼ˆå¤´éƒ¨ã€ä¾§è¾¹æ ã€ä¸»å†…å®¹åŒºã€æ—¶é—´è½´ï¼‰
- âœ… è§†é¢‘ä¸Šä¼ ç•Œé¢
- âœ… å·¥å…·æ ç»„ä»¶
- âœ… Vite å¼€å‘æœåŠ¡å™¨é…ç½®
- âœ… API ä»£ç†é…ç½® (æŒ‡å‘åç«¯ 4000 ç«¯å£)

### 3. åç«¯åˆæˆæœåŠ¡ (apps/server)
- âœ… Node.js + Express + TypeScript æœåŠ¡å™¨æ­å»º
- âœ… æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ (Multer)
  - å•æ–‡ä»¶ä¸Šä¼ : `POST /api/upload`
  - å¤šæ–‡ä»¶ä¸Šä¼ : `POST /api/upload/multiple`
- âœ… è§†é¢‘å¤„ç†åŠŸèƒ½ (FFmpeg)
  - è§†é¢‘ä¿¡æ¯è·å–: `GET /api/video/info/:fileId`
  - è§†é¢‘è£å‰ª: `POST /api/video/trim`
  - è§†é¢‘åˆå¹¶: `POST /api/video/merge`
  - æ·»åŠ æ°´å°: `POST /api/video/watermark`
  - è§†é¢‘è½¬ç : `POST /api/video/transcode`
- âœ… ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿ (Bull + Redis)
  - å¼‚æ­¥ä»»åŠ¡å¤„ç†
  - è¿›åº¦è¿½è¸ª
  - ä»»åŠ¡ç®¡ç† API
- âœ… é”™è¯¯å¤„ç†ä¸­é—´ä»¶
- âœ… ç¯å¢ƒå˜é‡é…ç½®

### 4. å…±äº«ä»£ç åº“ (packages/shared)
- âœ… TypeScript ç±»å‹å®šä¹‰
  - VideoOperation, JobStatus ç­‰æšä¸¾
  - VideoInfo, FileInfo, JobData ç­‰æ¥å£
  - æ—¶é—´è½´å’Œé¡¹ç›®é…ç½®ç±»å‹
- âœ… å·¥å…·å‡½æ•°åº“
  - æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
  - æ—¶é—´æ ¼å¼åŒ–
  - æ–‡ä»¶ç±»å‹éªŒè¯
  - ç™¾åˆ†æ¯”è®¡ç®—ç­‰
- âœ… å¸¸é‡å®šä¹‰
  - API ç«¯ç‚¹
  - è§†é¢‘åˆ†è¾¨ç‡å’Œæ ¼å¼
  - æ”¯æŒçš„æ–‡ä»¶ç±»å‹

### 5. å¼€å‘å·¥å…·å’Œé…ç½®
- âœ… EditorConfig
- âœ… .gitignore
- âœ… .cursorignore
- âœ… è¾…åŠ©è„šæœ¬ (setup.sh, clean.sh, check-env.sh)
- âœ… VSCode æ¨èæ‰©å±•

### 6. å®Œæ•´æ–‡æ¡£
- âœ… README.md - é¡¹ç›®æ€»è§ˆï¼ˆå¸¦å¾½ç« å’Œå®Œæ•´åŠŸèƒ½åˆ—è¡¨ï¼‰
- âœ… GETTING_STARTED.md - å¿«é€Ÿå¼€å§‹æŒ‡å—
- âœ… ARCHITECTURE.md - æ¶æ„è¯´æ˜
- âœ… PROJECT_SUMMARY.md - é¡¹ç›®æ€»ç»“
- âœ… CONTRIBUTING.md - è´¡çŒ®æŒ‡å—
- âœ… CHANGELOG.md - æ›´æ–°æ—¥å¿—
- âœ… LICENSE - MIT è®¸å¯è¯
- âœ… å„å­é¡¹ç›®çš„ç‹¬ç«‹ README

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- **æ€»æ–‡ä»¶æ•°**: 40+ ä¸ª
- **ä»£ç è¡Œæ•°**: çº¦ 2000+ è¡Œ
- **æ–‡æ¡£æ•°**: 8 ä¸ªä¸»è¦æ–‡æ¡£
- **é…ç½®æ–‡ä»¶**: 10+ ä¸ª
- **å¯ç”¨å‘½ä»¤**: 15+ ä¸ª

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒæ£€æŸ¥
```bash
./scripts/check-env.sh
```

### å®‰è£…ä¾èµ–
```bash
pnpm install  # å·²å®Œæˆ
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
pnpm dev

# æˆ–åˆ†åˆ«å¯åŠ¨
pnpm dev:web      # Web ç¼–è¾‘å™¨: http://localhost:3000
pnpm dev:server   # åç«¯æœåŠ¡: http://localhost:4000
```

## ğŸ“ ç›®å½•ç»“æ„

```
clipWiz/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                    # Web è§†é¢‘ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.tsx       # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ App.tsx        # ä¸»åº”ç”¨ï¼ˆå«åŸºç¡€ UIï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ App.css
â”‚   â”‚   â”‚   â””â”€â”€ index.css
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ vite.config.ts     # Vite é…ç½®ï¼ˆå«ä»£ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚
â”‚   â””â”€â”€ server/                 # åç«¯åˆæˆæœåŠ¡
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ index.ts       # Express æœåŠ¡å™¨
â”‚       â”‚   â”œâ”€â”€ routes/        # API è·¯ç”±
â”‚       â”‚   â”‚   â”œâ”€â”€ upload.ts  # æ–‡ä»¶ä¸Šä¼ 
â”‚       â”‚   â”‚   â”œâ”€â”€ video.ts   # è§†é¢‘å¤„ç†
â”‚       â”‚   â”‚   â””â”€â”€ job.ts     # ä»»åŠ¡ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚       â”‚   â”‚   â”œâ”€â”€ queue.ts   # Bull é˜Ÿåˆ—
â”‚       â”‚   â”‚   â””â”€â”€ videoProcessor.ts  # FFmpeg å¤„ç†
â”‚       â”‚   â””â”€â”€ middleware/
â”‚       â”‚       â””â”€â”€ errorHandler.ts
â”‚       â”œâ”€â”€ .env               # ç¯å¢ƒé…ç½®ï¼ˆå·²åˆ›å»ºï¼‰
â”‚       â”œâ”€â”€ .env.example       # é…ç½®æ¨¡æ¿
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ README.md
â”‚
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ shared/                 # å…±äº«ä»£ç åº“
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ index.ts       # å¯¼å‡ºå…¥å£
â”‚       â”‚   â”œâ”€â”€ types.ts       # ç±»å‹å®šä¹‰
â”‚       â”‚   â”œâ”€â”€ utils.ts       # å·¥å…·å‡½æ•°
â”‚       â”‚   â””â”€â”€ constants.ts   # å¸¸é‡
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ README.md
â”‚
â”œâ”€â”€ scripts/                    # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ setup.sh               # é¡¹ç›®åˆå§‹åŒ–
â”‚   â”œâ”€â”€ clean.sh               # æ¸…ç†è„šæœ¬
â”‚   â””â”€â”€ check-env.sh           # ç¯å¢ƒæ£€æŸ¥
â”‚
â”œâ”€â”€ node_modules/               # ä¾èµ–ï¼ˆå·²å®‰è£…ï¼‰
â”œâ”€â”€ pnpm-lock.yaml             # é”æ–‡ä»¶
â”œâ”€â”€ pnpm-workspace.yaml        # Workspace é…ç½®
â”œâ”€â”€ package.json               # æ ¹é…ç½®
â”œâ”€â”€ tsconfig.json              # TS åŸºç¡€é…ç½®
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .editorconfig
â”œâ”€â”€ .cursorignore
â”‚
â””â”€â”€ æ–‡æ¡£/
    â”œâ”€â”€ README.md              # é¡¹ç›®æ€»è§ˆ
    â”œâ”€â”€ GETTING_STARTED.md     # å¿«é€Ÿå¼€å§‹
    â”œâ”€â”€ ARCHITECTURE.md        # æ¶æ„è¯´æ˜
    â”œâ”€â”€ PROJECT_SUMMARY.md     # é¡¹ç›®æ€»ç»“
    â”œâ”€â”€ CONTRIBUTING.md        # è´¡çŒ®æŒ‡å—
    â”œâ”€â”€ CHANGELOG.md           # æ›´æ–°æ—¥å¿—
    â”œâ”€â”€ LICENSE                # MIT è®¸å¯
    â””â”€â”€ DELIVERY.md            # æœ¬æ–‡æ¡£
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| **è¿è¡Œæ—¶** | Node.js | >= 18.0.0 |
| **åŒ…ç®¡ç†** | pnpm | >= 8.0.0 |
| **è¯­è¨€** | TypeScript | 5.3 |
| **å‰ç«¯æ¡†æ¶** | React | 18.2 |
| **æ„å»ºå·¥å…·** | Vite | 5.0 |
| **UI æ¡†æ¶** | Ant Design | 5.12 |
| **åç«¯æ¡†æ¶** | Express | 4.18 |
| **è§†é¢‘å¤„ç†** | FFmpeg | fluent-ffmpeg 2.1 |
| **ä»»åŠ¡é˜Ÿåˆ—** | Bull | 4.12 |
| **æ•°æ®åº“** | Redis | - |
| **æ–‡ä»¶ä¸Šä¼ ** | Multer | 1.4 |

## ğŸ“š API ç«¯ç‚¹æ€»è§ˆ

### æ–‡ä»¶ä¸Šä¼ 
| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| POST | `/api/upload` | ä¸Šä¼ å•ä¸ªè§†é¢‘æ–‡ä»¶ |
| POST | `/api/upload/multiple` | ä¸Šä¼ å¤šä¸ªè§†é¢‘æ–‡ä»¶ |

### è§†é¢‘å¤„ç†
| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| GET | `/api/video/info/:fileId` | è·å–è§†é¢‘å…ƒä¿¡æ¯ |
| POST | `/api/video/trim` | è£å‰ªè§†é¢‘ |
| POST | `/api/video/merge` | åˆå¹¶å¤šä¸ªè§†é¢‘ |
| POST | `/api/video/watermark` | æ·»åŠ æ–‡å­—æ°´å° |
| POST | `/api/video/transcode` | è§†é¢‘æ ¼å¼è½¬ç  |

### ä»»åŠ¡ç®¡ç†
| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| GET | `/api/job/:jobId` | è·å–ä»»åŠ¡çŠ¶æ€å’Œè¿›åº¦ |
| GET | `/api/job` | è·å–æ‰€æœ‰ä»»åŠ¡åˆ—è¡¨ |
| DELETE | `/api/job/:jobId` | å–æ¶ˆä»»åŠ¡ |

## ğŸ“‹ å¼€å‘æ¸…å•

### âœ… å·²å®Œæˆ
- [x] é¡¹ç›®ç»“æ„æ­å»º
- [x] TypeScript é…ç½®
- [x] pnpm workspace é…ç½®
- [x] Web åŸºç¡€ç•Œé¢
- [x] åç«¯ API æ¡†æ¶
- [x] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- [x] è§†é¢‘å¤„ç†æ ¸å¿ƒåŠŸèƒ½
- [x] ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿ
- [x] å…±äº«ç±»å‹åº“
- [x] å®Œæ•´æ–‡æ¡£
- [x] å¼€å‘å·¥å…·è„šæœ¬

### â³ å¾…å¼€å‘ï¼ˆä¼˜å…ˆçº§æ’åºï¼‰

#### çŸ­æœŸç›®æ ‡ï¼ˆ1-2å‘¨ï¼‰
- [ ] é›†æˆ Video.js è§†é¢‘æ’­æ”¾å™¨
- [ ] å®ç°æ—¶é—´è½´æ‹–æ‹½ç¼–è¾‘
- [ ] æ·»åŠ è§†é¢‘å®æ—¶é¢„è§ˆ
- [ ] å®ç°æ‹–æ‹½ä¸Šä¼ æ–‡ä»¶
- [ ] WebSocket å®æ—¶è¿›åº¦æ¨é€
- [ ] è§†é¢‘ç¼©ç•¥å›¾ç”Ÿæˆ

#### ä¸­æœŸç›®æ ‡ï¼ˆ1-2æœˆï¼‰
- [ ] å¤šè½¨é“æ—¶é—´è½´ç¼–è¾‘
- [ ] è§†é¢‘è½¬åœºæ•ˆæœ
- [ ] æ»¤é•œå’Œç‰¹æ•ˆç³»ç»Ÿ
- [ ] å…³é”®å¸§åŠ¨ç”»
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] é¡¹ç›®ä¿å­˜å’Œç®¡ç†
- [ ] åˆ†ç‰‡ä¸Šä¼ å¤§æ–‡ä»¶
- [ ] CDN é›†æˆ

#### é•¿æœŸç›®æ ‡ï¼ˆ3-6æœˆï¼‰
- [ ] äº‘ç«¯éƒ¨ç½²ï¼ˆAWS/é˜¿é‡Œäº‘ï¼‰
- [ ] ç§»åŠ¨ç«¯å“åº”å¼è®¾è®¡
- [ ] AI æ™ºèƒ½å‰ªè¾‘åŠŸèƒ½
- [ ] åä½œç¼–è¾‘åŠŸèƒ½
- [ ] æ¨¡æ¿å¸‚åœº
- [ ] éŸ³é¢‘ç¼–è¾‘å™¨
- [ ] å¯¼å‡ºé¢„è®¾ç®¡ç†

## âš™ï¸ ç¯å¢ƒè¦æ±‚

### å¿…éœ€
- âœ… Node.js >= 18.0.0 (å·²æ£€æµ‹: v20.19.4)
- âœ… pnpm >= 8.0.0 (å·²æ£€æµ‹: v10.27.0)
- âœ… FFmpeg (å·²æ£€æµ‹: v7.1.1)

### å¯é€‰ï¼ˆç”¨äºå®Œæ•´åŠŸèƒ½ï¼‰
- âš ï¸ Redis (ä»»åŠ¡é˜Ÿåˆ—åŠŸèƒ½éœ€è¦)

### å®‰è£… Redis
```bash
# macOS
brew install redis
brew services start redis

# Ubuntu/Debian
sudo apt update
sudo apt install redis-server
sudo systemctl start redis
```

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®

### ç«‹å³å¯åš
1. **å¯åŠ¨é¡¹ç›®éªŒè¯**
   ```bash
   pnpm dev
   ```
   è®¿é—® http://localhost:3000 æŸ¥çœ‹ Web ç•Œé¢

2. **æµ‹è¯•æ–‡ä»¶ä¸Šä¼ **
   - åœ¨ Web ç•Œé¢ç‚¹å‡»"ä¸Šä¼ è§†é¢‘"
   - é€‰æ‹©æµ‹è¯•è§†é¢‘æ–‡ä»¶
   - éªŒè¯ä¸Šä¼ åŠŸèƒ½

3. **æµ‹è¯• API**
   ```bash
   # å¥åº·æ£€æŸ¥
   curl http://localhost:4000/health
   ```

### çŸ­æœŸå¼€å‘é‡ç‚¹
1. **å®Œå–„å‰ç«¯åŠŸèƒ½**
   - é›†æˆ Video.js æ’­æ”¾å™¨
   - å®ç°æ—¶é—´è½´åŸºç¡€åŠŸèƒ½
   - æ·»åŠ è§†é¢‘é¢„è§ˆ

2. **ä¼˜åŒ–åç«¯**
   - æ·»åŠ è§†é¢‘é¢„å¤„ç†
   - ç”Ÿæˆç¼©ç•¥å›¾
   - ä¼˜åŒ–ä»»åŠ¡é˜Ÿåˆ—

3. **æå‡ç”¨æˆ·ä½“éªŒ**
   - è¿›åº¦æ¡æ˜¾ç¤º
   - é”™è¯¯æç¤ºä¼˜åŒ–
   - æ“ä½œåé¦ˆ

## ğŸ“ æ³¨æ„äº‹é¡¹

### å…³äº Redis
- Redis ä¸»è¦ç”¨äºä»»åŠ¡é˜Ÿåˆ—åŠŸèƒ½
- å¦‚æœæ²¡æœ‰å®‰è£… Redisï¼Œè§†é¢‘å¤„ç† API å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œ
- å»ºè®®åœ¨å¼€å‘ç¯å¢ƒå®‰è£… Redis ä»¥æµ‹è¯•å®Œæ•´åŠŸèƒ½

### å…³äº FFmpeg
- ç¡®ä¿ FFmpeg åœ¨ç³»ç»Ÿ PATH ä¸­
- æˆ–åœ¨ `apps/server/.env` ä¸­é…ç½® `FFMPEG_PATH`
- macOS Homebrew å®‰è£…è·¯å¾„é€šå¸¸ä¸º `/opt/homebrew/bin/ffmpeg`

### æ–‡ä»¶å­˜å‚¨
- é»˜è®¤ä¸Šä¼ æ–‡ä»¶å­˜å‚¨åœ¨ `apps/server/uploads/`
- å¤„ç†åçš„æ–‡ä»¶åœ¨ `apps/server/uploads/output/`
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨å¯¹è±¡å­˜å‚¨ï¼ˆS3/OSSï¼‰

### æ€§èƒ½è€ƒè™‘
- è§†é¢‘å¤„ç†æ˜¯ CPU å¯†é›†å‹ä»»åŠ¡
- å»ºè®®æ ¹æ®æœåŠ¡å™¨é…ç½®è°ƒæ•´å¹¶å‘æ•°
- å¤§æ–‡ä»¶å¤„ç†å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´

## ğŸ”— ç›¸å…³é“¾æ¥

- [Node.js](https://nodejs.org/)
- [pnpm](https://pnpm.io/)
- [React](https://react.dev/)
- [Vite](https://vitejs.dev/)
- [Ant Design](https://ant.design/)
- [Express](https://expressjs.com/)
- [FFmpeg](https://ffmpeg.org/)
- [Bull](https://github.com/OptimalBits/bull)
- [Redis](https://redis.io/)

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. [å¿«é€Ÿå¼€å§‹æŒ‡å—](GETTING_STARTED.md) - å¸¸è§é—®é¢˜è§£ç­”
2. [æ¶æ„æ–‡æ¡£](ARCHITECTURE.md) - æŠ€æœ¯ç»†èŠ‚
3. [é¡¹ç›® Issues](https://github.com/your-repo/issues) - æŠ¥å‘Šé—®é¢˜

## ğŸ‰ æ€»ç»“

ClipWiz é¡¹ç›®å·²ç»å®ŒæˆåŸºç¡€æ¡†æ¶æ­å»ºï¼ŒåŒ…å«ï¼š
- âœ… å®Œæ•´çš„ monorepo ç»“æ„
- âœ… Web ç¼–è¾‘å™¨åŸºç¡€ç•Œé¢
- âœ… åç«¯è§†é¢‘å¤„ç†æœåŠ¡
- âœ… ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿ
- âœ… å…±äº«ç±»å‹åº“
- âœ… å®Œæ•´çš„æ–‡æ¡£ä½“ç³»

**é¡¹ç›®çŠ¶æ€**: ğŸŸ¢ Ready for Development

å¯ä»¥ç«‹å³å¼€å§‹å¼€å‘å…·ä½“åŠŸèƒ½ï¼

---

**äº¤ä»˜æ—¥æœŸ**: 2026-01-06  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… åŸºç¡€æ¡†æ¶å®Œæˆ

Made with â¤ï¸ by ClipWiz Team

